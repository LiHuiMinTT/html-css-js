<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //定义全局的一个生成器函数
        function * myfun(){
            yield 1;
            yield 2;
            yield 3;
        }

        for (const iterator of myfun()) {
            console.log(iterator); //1 2 3
        }

        console.log(myfun().next());//{value: 1, done: false}

        //对象内部的生成器函数
        let obj = {
            * myfun(){
                yield 4;
                yield 5;
                yield 6;
            }
        }
        for (const iterator of obj.myfun()) {
            console.log(iterator); //4 5 6
        }

        //生成器用于替代迭代器实现自定义迭代
        let obj1 = {
            * [Symbol.iterator](){
                yield 4;
                yield 5;
                yield 6;
            }
        }
        //for-of后台会寻找默认的迭代器[Symbol.iterator]
        for (const iterator of obj1) {
            console.log(iterator); //4 5 6
        }

        //生成器实现iterable接口，因此具有next方法.
        //只有迭代器对象才能使用next

        //箭头函数不能定义生成器函数
        //yield只能直接在生成器函数中使用，如果生成器函数内部定义非生成器函数，
        //在非生成器内部调用yield也不行

    function * n(n){
        for(let i =0;i<n;i++){
            yield i;
            yield i+2;
        }
    }
    const iter = n(3);
    console.log('---------------');
    console.log(iter.next());
    console.log(iter.next());
    console.log(iter.next());
    console.log(iter.next());
console.log('//////////');
    function * nT(n){
        if(n>0){
            yield * nT(n-1);
            yield n-1;
        }else{
            return 100
        }
        
    }
    console.log('test');
    for (const i of nT(3)) {
        console.log(i);
    }
    // const iter1 = nT(3);
    // console.log(iter1.next());
    // console.log(iter1.next());
    // console.log(iter1.next());
    // console.log(iter1.next());
    function * test(x){
        let y = yield(x + 6);
        console.log(y,'y');
        return y;
    }
    const testi = test(8);
    console.log(testi.next());
    console.log(testi.next());
    </script>
</body>
</html>